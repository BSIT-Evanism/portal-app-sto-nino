---
import Marquee from "./Marquee.astro";
---

<Marquee server:defer>
  <div
    slot="fallback"
    class="relative overflow-hidden bg-gradient-to-r from-gray-50 to-white"
  >
    <div class="flex flex-col gap-4 p-6">
      <div class="flex space-x-4 animate-pulse">
        {
          [...Array(3)].map(() => (
            <div class="flex-1">
              <div class="h-6 bg-gradient-to-r from-gray-200 via-gray-100 to-gray-200 rounded-lg" />
              <div class="h-4 bg-gradient-to-r from-gray-200 via-gray-100 to-gray-200 rounded-lg w-2/3 mt-2" />
            </div>
          ))
        }
      </div>

      <div class="mt-4 flex space-x-4 animate-pulse">
        {
          [...Array(3)].map(() => (
            <div class="flex-1">
              <div class="h-6 bg-gradient-to-r from-gray-200 via-gray-100 to-gray-200 rounded-lg" />
              <div class="h-4 bg-gradient-to-r from-gray-200 via-gray-100 to-gray-200 rounded-lg w-3/4 mt-2" />
            </div>
          ))
        }
      </div>
    </div>

    <div
      class="absolute inset-0 bg-gradient-to-r from-transparent via-white/50 to-transparent animate-shimmer"
    >
    </div>
  </div>
</Marquee>

<style>
  @keyframes shimmer {
    0% {
      transform: translateX(-100%);
    }
    100% {
      transform: translateX(100%);
    }
  }

  .animate-shimmer {
    animation: shimmer 2s infinite;
  }
</style>
